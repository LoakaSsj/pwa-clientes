{% extends "base.html" %}

{% block title %}Clientes - PWA Clientes{% endblock %}

{% block content %}
<section class="clientes-section fade-in">
    <div class="clientes-header">
        <div>
            <h1>Clientes</h1>
            <p>Gestiona tus clientes. Todos los cambios se realizan <code></code> y siguen funcionando en modo offline (cuando haya datos en caché).</p>
        </div>
        <button id="btnNuevoCliente" class="btn-primary">Nuevo cliente</button>
    </div>

    <div class="clientes-toolbar">
        <div class="form-group">
            <label for="searchCliente">Buscar cliente</label>
            <input type="text" id="searchCliente" placeholder="Nombre o parte del nombre">
        </div>
        <div class="recent-searches">
            <span class="label">Búsquedas recientes:</span>
            <div id="recentSearches"></div>
        </div>
    </div>

    <!-- Tabla de Cambios Pendientes (Offline) -->
    <div id="pendingChangesContainer" class="pending-changes-container hidden">
        <div class="pending-header">
            <h3>⚠️ Cambios pendientes de sincronización</h3>
            <p>Estás offline. Estos cambios se guardarán cuando recuperes la conexión.</p>
        </div>
        <table class="table table-pending">
            <thead>
                <tr>
                    <th>Acción</th>
                    <th>Datos</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody id="pendingChangesBody">
            </tbody>
        </table>
    </div>

    <div class="table-wrapper">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Saldo</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="clientesTableBody">
            </tbody>
        </table>
        <div id="clientesEmpty" class="empty-state hidden">
            No hay clientes cargados todavía.
        </div>
    </div>

    <!-- Modal Cliente -->
    <div id="clienteModal" class="modal hidden">
        <div class="modal-content">
            <h2 id="clienteModalTitle">Nuevo cliente</h2>
            <form id="clienteForm">
                <input type="hidden" id="clienteId">
                <div class="form-group">
                    <label for="clienteNombre">Nombre</label>
                    <input type="text" id="clienteNombre" required>
                </div>
                <div class="form-group">
                    <label for="clienteSaldo">Saldo</label>
                    <input type="number" step="0.01" id="clienteSaldo" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="btnCancelar" class="btn-outline">Cancelar</button>
                    <button type="submit" class="btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/clientes.js') }}"></script>
{% endblock %}





